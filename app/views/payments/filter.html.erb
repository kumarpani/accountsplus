<div class="header">
  <h1 class="col-md-6 col-md-offset-2 companyName">Filter Payments</h1>
</div>


<div class="belowHeader">
  <p>Please enter both start and end dates:</p>
  <%= form_tag({}, {class: 'form-inline', method: 'get'}) do %>
      <%= text_field_tag :start_date, params[:start_date], class: 'form-control', placeholder: 'Start Date' %>
      <%= text_field_tag :end_date, params[:end_date], class: 'form-control', placeholder: 'End Date' %>
      <%= submit_tag 'Search', name: nil  %>
  <% end %>

  <% if !@filtered_payments.nil? %>

      <br>

    <table class="table gridData table-hover">
      <thead>
      <tr>
        <th><strong>#</strong></th>
        <th><strong>Paid on</strong></th>
        <th><strong>Description</strong></th>
        <th><strong>Mode</strong></th>
        <th><strong>Amount</strong></th>
        <th><strong>Type</strong></th>
        <th><strong>Added By</strong></th>
        <th><strong>Last Modified By</strong></th>
        <th></th>
        <!--<th></th>-->
      </tr>
      </thead>

      <tbody>
      <% @filtered_payments.each_with_index do |payment, i| %>
        <tr>
          <td><%= i+1 %></td>
          <td><%= display_date(payment.paid_on) %></td>
          <td><%= payment.description %></td>
          <td><%= payment.mode %></td>
          <td class="alignRight"><%= payment.amount %></td>
          <td><%= payment.payment_type %></td>
          <td><%= payment.payment_added_by %></td>
          <td><%= payment.payment_last_modified_by %></td>
          <td><%= link_to 'Details', payment, class: :info, style: 'color:white' %></td>
        </tr>
      <% end %>
      </tbody>
    </table>
      <%end%>

    <br>
</div>

<script>
    $('#start_date').datepicker({format: 'dd-mm-yyyy', autoclose: true, todayHighlight: true, clearBtn: true})
    $('#end_date').datepicker({format: 'dd-mm-yyyy', autoclose: true, todayHighlight: true, clearBtn: true})
</script>

